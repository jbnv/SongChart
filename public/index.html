<html>
<head>
<!-- Library -->
<script src="/lib/angular.js" charset="utf-8"></script>
<script src="/lib/ui-bootstrap-tpls-0.11.0.js" charset="utf-8"></script>
<link rel="stylesheet" type="text/css" href="/lib/bootstrap.css"></link>
<!-- Application -->
<script src="/js/songChartController.js" charset="utf-8"></script>
<script>
	var songChartApp = angular.module('songChartApp', ['ui.bootstrap']);
	songChartApp.controller('songChartController', 
		['$scope','$filter','$http',SongChartController]);
</script>
</head>

<script>
</script>

<body data-ng-app="songChartApp" data-ng-controller="songChartController">

<nav role="navigation" class="navbar navbar-default navbar-fixed-top">
        <ul role="navigation" class="nav navbar-nav">
            <li class="dropdown">
                <a href="#" data-toggle="dropdown" class="dropdown-toggle">{{filterDecadeDisplay}} <b class="caret"></b></a>
                <ul class="dropdown-menu">
					<li data-ng-repeat="decade in [1970,1980,1990] | orderBy: identity" 
						data-ng-click="setFilterDecade(decade)"
					><a href="#">{{decade}}s</a></li>
                </ul>
			</li>
            <li class="dropdown" data-ng-show="filterDecadeValue > 0">
                <a href="#" data-toggle="dropdown" class="dropdown-toggle">{{filterYearDisplay}} <b class="caret"></b></a>
                <ul class="dropdown-menu">
					<li data-ng-repeat="i in [0,1,2,3,4,5,6,7,8,9]" 
						data-ng-click="setFilterYear(filterDecadeValue+i)"
					><a href="#">{{filterDecadeValue+i}}</a></li>
                </ul>
            </li>
            <li class="dropdown" data-ng-show="filterYearValue > 0">
                <a href="#" data-toggle="dropdown" class="dropdown-toggle">{{filterMonthDisplay}} <b class="caret"></b></a>
                <ul class="dropdown-menu">
					<li data-ng-repeat="month in months" 
						data-ng-click="setFilterMonth($index+1)"
					><a href="#">{{month}}</a></li>
                </ul>
            </li>
        </ul>
        <ul role="navigation" class="nav navbar-nav navbar-right">			
			<li><a href="#" data-ng-click="init();">Reset</a></li>
        </ul>	
</nav>

<br /><br/ ><br/ ><br/ ><!-- spacer to move table underneath nav bar -->

<table class="table table-condensed table-hover">
	<thead>
		<tr>
			<th data-ng-show="showRank">Rank</th>
			<th>Title</th>
			<th>Artist</th>
			<th data-ng-show="showDate">Date</th>
			<th>Score</th>
			<th>Debut</th>
			<th>Peak</th>
			<th>Months</th>
		</tr>
	</thead>
	<tbody>
		<tr data-ng-repeat="song in displayArray">
			<td data-ng-show="showRank">{{ $index+1 }}</td>
			<td><a href="http://playlists.wikidot.com/{{ song.fullname }}">{{song.title}}</a></td>
			<td><a href="http://playlists.wikidot.com/{{ song.artist }}">{{ getArtist(song.artist).name }}</a></td>
			<td data-ng-show="showDate">{{dateString(song)}}</td>
			<td>{{song.score}}</td>
			<td>{{song.debutrank}}</td>
			<td>{{song.peakrank}}</td>
			<td>{{song.months}}</td>
		</tr>
	</tbody>
</table>

</body>
</html>